var globals={getDistance:function(pointA,pointB){var dx=pointA.x-pointB.x,dy=pointA.y-pointB.y,distance;return Math.sqrt(dx*dx+dy*dy)},setCookie:function(c_name,c_value,c_days){var d=new Date;d.setTime(d.getTime()+24*c_days*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=c_name+"="+c_value+";"+expires+";path=/"},getCookie:function(c_name){for(var name=c_name+"=",decodedCookie,ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},getEmitter:function(game){var emitter=game.add.emitter();return emitter.makeParticles("atl_game",["particle1c","particle2c","particle3c"],30),emitter.gravity=0,emitter.minSpeed=600,emitter.maxParticleSpeed=new Phaser.Point(800,800),emitter.minParticleSpeed=new Phaser.Point(-800,-800),emitter.alpha=.5,emitter.lifespan=1e3,emitter.height=90,emitter.width=90,emitter}};var aimingtest={boot:function(game){}};aimingtest.boot.prototype=function(game){},aimingtest.boot.prototype={preload:function(){this.load.atlasJSONArray("atl_game","assets/images/spritesheet.png","assets/images/spritesheet.json"),this.load.audio("shot","assets/sounds/165271__mojomills__cap-shot-2.mp3"),this.load.audio("hit","assets/sounds/249613__otisjames__explosionsfx.mp3"),this.load.audio("spawn","assets/sounds/11221__jnr-hacksaw__zap.mp3"),this.load.audio("lghit","assets/sounds/sound2.wav"),this.load.audio("lgfailed","assets/sounds/156351__dayvonjersen__uhhhhhhh.wav")},create:function(){this.stage.backgroundColor="rgb(106,98,60)",this.state.start("menu")}};aimingtest.menu=function(game){},aimingtest.menu.prototype=function(game){},aimingtest.menu.prototype={create:function(){document.getElementById("menu").style.display="block",document.getElementById("display").innerHTML="AIMING TEST V1.0",document.getElementById("normalBest").innerHTML=globals.getCookie("aimingTestBest"),document.getElementById("evasionBest").innerHTML=globals.getCookie("aimingEvasionBest1"),document.getElementById("trackingBest").innerHTML=globals.getCookie("aimingTrackingBest1");var t=this;document.getElementById("btnNormalMode").addEventListener("click",function(){t.countDown("basicMode")}),document.getElementById("btnEvasionMode").addEventListener("click",function(){t.countDown("evasionMode")}),document.getElementById("btnTrackingMode").addEventListener("click",function(){t.countDown("trackingMode")}),document.getElementById("btnResetScores").addEventListener("click",function(){globals.setCookie("aimingEvasionBest1","0",180),globals.setCookie("aimingTestBest","0",180),globals.setCookie("aimingTrackingBest1","0",180),document.getElementById("normalBest").innerHTML="0",document.getElementById("evasionBest").innerHTML="0",document.getElementById("trackingBest").innerHTML="0"});var textStyle={font:"bold 32px Arial",fill:"#fff",align:"center",boundsAlignH:"center",boundsAlignV:"middle"},textStyleHelp={font:"bold 18px Arial",fill:"#fff",align:"center",boundsAlignH:"center",boundsAlignV:"middle"};this.text=this.add.text(0,0,"",textStyle),this.text.setTextBounds(0,0,960,540),this.helpText=this.add.text(0,0,"",textStyleHelp),this.helpText.setTextBounds(0,270,960,270)},countDown:function(mode){var state=mode,help;help="trackingMode"==mode?"Try to follow the target with the mouse pressing the button to make points for 60 seconds.":"Shoot the ten targets with the mouse (click to shoot)";var t=this;document.getElementById("menu").style.display="none",this.helpText.setText(help);var counterSeconds=5;this.text.setText(counterSeconds.toString()),counterSeconds--;var counterInterval=setInterval(function(){t.text.setText(counterSeconds.toString()),--counterSeconds<0&&(clearInterval(counterInterval),t.state.start(state))},1e3)}};aimingtest.basicMode=function(game){},aimingtest.basicMode.prototype=function(game){},aimingtest.basicMode.prototype={create:function(){document.getElementById("menu").style.display="none",this.shotsArray=[],this.hitsArray=[];var cookie=globals.getCookie("aimingTestBest");this.bestScore=""!=cookie?parseInt(cookie):0,this.display=document.getElementById("display"),this.display.innerHTML="10 targets left",this.hitsArray.push(["HIT","TIME","DISTANCE","SCORE"]),this.reloadTime=!1,this.targetTimer,this.target,this.hitsCounter=0,this.targetsCounter=0,this.failedShotsCounter=0,this.bonusDistanceCounter=0,this.bonusTimeCounter=0,this.pointsTimeBonus=1e3,this.pointsDistanceBonus=400,this.targetStartTime,this.score=0,this.totalScore=0;var t=this;this.emitter=globals.getEmitter(this.game),this.sndShot=this.add.audio("shot",1,!1),this.sndHit=this.add.audio("hit",1,!1),this.sndTarget=this.add.audio("spawn",1,!1),this.target=this.add.sprite(this.math.between(80,880),this.math.between(80,460),"atl_game","targetc"),this.target.anchor.setTo(.5,.5),this.target.radio=this.target.height/2,this.target.inputEnabled=!0,this.target.visible=!1,this.targetTimer=setTimeout(t.resetTarget.bind(t),t.math.between(800,1100)),this.input.onDown.add(function(pointerPosition){if(!t.reloadTime){var targetHitTime=performance.now();t.reloadTime=!0;var targetPosition=t.target.position,isHit=t.target.input.pointerOver();t.sndShot.play();var distance=parseInt(globals.getDistance(pointerPosition,targetPosition));if(t.shotsArray.push(distance),isHit&&distance<=this.target.radio){t.clearTimer(),t.target.visible=!1,t.sndHit.play(),t.emitter.x=targetPosition.x-40,t.emitter.y=targetPosition.y-40,t.emitter.explode(1e3,10),t.hitsCounter++;var timeSpan=parseInt(targetHitTime-t.targetStartTime),hitScore=parseInt(400-2*distance-timeSpan/10);if(t.score+=hitScore,distance<5&&t.bonusDistanceCounter++,timeSpan<400&&t.bonusTimeCounter++,t.hitsArray.push([t.hitsCounter,timeSpan+" ms",distance+" px",hitScore+" pts"]),10==this.targetsCounter)return void this.gameOver();setTimeout(t.resetTarget.bind(t),this.math.between(300,1e3))}else t.failedShotsCounter++;setTimeout(function(){t.reloadTime=!1},30)}},this)},resetTarget:function(){this.target.visible=!1,10!=this.targetsCounter?(this.targetsCounter++,this.sndTarget.play(),this.target.reset(this.math.between(80,880),this.math.between(80,460)),this.targetStartTime=performance.now(),this.setTimer(),this.display.innerHTML=10-this.targetsCounter+" targets left"):this.gameOver()},setTimer:function(){this.targetTimer=setTimeout(this.resetTarget.bind(this),this.math.between(800,1e3))},clearTimer:function(){clearTimeout(this.targetTimer)},gameOver:function(){this.input.onDown.removeAll(),this.setTotalScore(),this.bestScore<this.totalScore?(this.display.innerHTML="You got a new record !!! (normal mode)",globals.setCookie("aimingTestBest",this.totalScore,180)):this.display.innerHTML="Your best score is "+this.bestScore.toString()+"(normal mode)",this.showResults()},setTotalScore:function(){this.totalScore=this.score+this.bonusDistanceCounter*this.pointsDistanceBonus+this.bonusTimeCounter*this.pointsTimeBonus-400*this.failedShotsCounter},showResults:function(){var tableResults=document.getElementById("tbl_results"),cellType="th";this.hitsArray.forEach(element=>{var i=0,row=document.createElement("tr");for(i=0;i<4;i++){var cell=document.createElement(cellType);cell.textContent=element[i],row.appendChild(cell)}cellType="td",tableResults.appendChild(row)});var statsArray=[];statsArray.push("BONUS"),statsArray.push([this.bonusDistanceCounter+" x Distance < 5px","+"+this.bonusDistanceCounter*this.pointsDistanceBonus+" pts"]),statsArray.push([this.bonusTimeCounter+" x Time < 400ms","+"+this.bonusTimeCounter*this.pointsTimeBonus+" pts"]),statsArray.push("PENALTIES"),statsArray.push([this.failedShotsCounter+" x Failed Shots",-400*this.failedShotsCounter+" pts"]),statsArray.forEach(element=>{var i=0,rowSize=0,row=document.createElement("tr");for(Array.isArray(element)?(cellType="td",rowSize=2):(cellType="th",rowSize=1),i=0;i<rowSize;i++){var cell=document.createElement(cellType);"th"==cellType?(cell.setAttribute("colspan",4),cell.textContent=element):(cell.setAttribute("colspan",2),cell.textContent=element[i]),row.appendChild(cell)}tableResults.appendChild(row)});var row=document.createElement("tr"),cell=document.createElement("th");cell.setAttribute("colspan",4),cell.textContent="TOTAL SCORE",row.appendChild(cell),tableResults.appendChild(row),row=document.createElement("tr"),(cell=document.createElement("td")).setAttribute("colspan",4),cell.style.backgroundColor="red",cell.style.color="white",cell.style.fontSize="1.5em",cell.textContent=this.totalScore.toString(),row.appendChild(cell),tableResults.appendChild(row),tableResults.style.opacity="1",document.getElementById("replay").innerHTML="Click to replay";var t=this;setTimeout(function(){t.input.onDown.add(t.replay,t)},1500)},replay:function(){var tableResults=document.getElementById("tbl_results");tableResults.style.opacity=0,tableResults.innerHTML="",document.getElementById("replay").innerHTML="",this.emitter.destroy(),this.state.start("menu")}};aimingtest.evasionMode=function(game){},aimingtest.evasionMode.prototype=function(game){},aimingtest.evasionMode.prototype={create:function(){this.isEvading=!1,this.evasionTween=null,this.evasionPoint=new Phaser.Point,this.shotsArray=[],this.hitsArray=[];var cookie=globals.getCookie("aimingEvasionBest1");this.bestScore=""!=cookie?parseInt(cookie):0,this.display=document.getElementById("display"),this.display.innerHTML="10 targets left",this.hitsArray.push(["HIT","TIME","DISTANCE","SCORE"]),this.reloadTime=!1,this.target,this.evasionRectangle=new Phaser.Rectangle,this.hitsCounter=0,this.targetsCounter=0,this.failedShotsCounter=0,this.bonusDistanceCounter=0,this.bonusTimeCounter=0,this.pointsTimeBonus=1e3,this.pointsDistanceBonus=400,this.targetStartTime,this.score=0,this.totalScore=0;var t=this;this.emitter=globals.getEmitter(this.game),this.sndShot=this.add.audio("shot",1,!1),this.sndHit=this.add.audio("hit",1,!1),this.sndTarget=this.add.audio("spawn",1,!1),this.target=this.add.sprite(this.math.between(80,880),this.math.between(80,460),"atl_game","targetc"),this.target.anchor.setTo(.5,.5),this.target.radio=this.target.height/2,this.target.inputEnabled=!0,this.target.visible=!1,setTimeout(t.resetTarget.bind(t),1e3),this.input.onDown.add(function(pointerPosition){if(!t.reloadTime){var targetHitTime=performance.now();t.reloadTime=!0;var targetPosition=t.target.position,isHit=t.target.input.pointerOver();t.sndShot.play();var distance=parseInt(globals.getDistance(pointerPosition,targetPosition));if(t.shotsArray.push(distance),isHit&&distance<=this.target.radio){this.evasionTween.stop(),t.target.visible=!1,t.sndHit.play(),t.emitter.x=targetPosition.x-40,t.emitter.y=targetPosition.y-40,t.emitter.explode(1e3,10),t.hitsCounter++;var timeSpan=parseInt(targetHitTime-t.targetStartTime),hitScore=parseInt(400-2*distance-timeSpan/10);if(t.score+=hitScore,distance<5&&t.bonusDistanceCounter++,timeSpan<400&&t.bonusTimeCounter++,t.hitsArray.push([t.hitsCounter,timeSpan+" ms",distance+" px",hitScore+" pts"]),10==this.targetsCounter)return void this.gameOver();setTimeout(t.resetTarget.bind(t),this.math.between(300,500))}else t.failedShotsCounter++;setTimeout(function(){t.reloadTime=!1},30)}},this)},update:function(){if(!this.isEvading){var pointerPosition=this.input.position,dx=this.input.x-this.target.x,dy=this.input.y-this.target.y;if(9e4>dx*dx+dy*dy){this.isEvading=!0,this.setEvasionRectangle(pointerPosition);var t=this;this.evasionRectangle.random(t.evasionPoint),this.evasionTween=this.add.tween(this.target).to({x:Math.ceil(t.evasionPoint.x),y:Math.ceil(t.evasionPoint.y)},500).start(),setTimeout(function(){t.isEvading=!1},800)}}},resetTarget:function(){this.target.visible=!1,10!=this.targetsCounter?(this.targetsCounter++,this.sndTarget.play(),this.target.reset(this.math.between(80,880),this.math.between(80,460)),this.targetStartTime=performance.now(),this.display.innerHTML=10-this.targetsCounter+" targets left"):this.gameOver()},setEvasionRectangle:function(pointerPosition){this.target.x>pointerPosition.x?this.target.y<pointerPosition.y?(this.evasionRectangle.x=Math.random()>.5?this.target.x:0+this.target.radio,this.evasionRectangle.y=this.target.radio,this.evasionRectangle.x>this.target.radio?(this.evasionRectangle.width=this.world.width-this.target.x-this.target.radio,this.evasionRectangle.height=this.world.height-this.target.radio):(this.evasionRectangle.width=this.target.x-this.target.radio,this.evasionRectangle.height=this.target.y-this.target.radio)):(this.evasionRectangle.y=Math.random()>.5?this.target.y:this.target.radio,this.evasionRectangle.y>this.target.radio?(this.evasionRectangle.x=this.target.radio,this.evasionRectangle.width=this.world.width-this.target.width,this.evasionRectangle.height=this.world.height-this.target.y-this.target.radio):(this.evasionRectangle.x=this.target.x,this.evasionRectangle.width=this.world.width-this.target.x-this.target.radio,this.evasionRectangle.height=this.target.y-this.target.radio)):(this.evasionRectangle.x=this.target.radio,this.target.y<pointerPosition.y?(this.evasionRectangle.y=this.target.radio,this.evasionRectangle.width=Math.random()>.5?this.world.width-this.target.width:this.target.x-this.target.radio,this.evasionRectangle.width==this.target.x-this.target.radio?this.evasionRectangle.height=this.world.height-this.target.height:this.evasionRectangle.height=this.target.y-this.target.radio):(this.evasionRectangle.y=Math.random()>.5?this.target.radio:this.target.y,this.evasionRectangle.y==this.target.radio?(this.evasionRectangle.width=this.target.x-this.target.radio,this.evasionRectangle.height=this.world.height-this.target.radio):(this.evasionRectangle.width=this.world.width-this.target.radio,this.evasionRectangle.height=this.world.height-this.target.y-this.target.radio)))},gameOver:function(){this.input.onDown.removeAll(),this.target.visible=!1,this.setTotalScore(),this.bestScore<this.totalScore?(this.display.innerHTML="You got a new record in Evasion mode!!!",globals.setCookie("aimingEvasionBest1",this.totalScore,180)):this.display.innerHTML="Your best score is "+this.bestScore.toString()+" (Evasion mode)",this.showResults()},setTotalScore:function(){this.totalScore=this.score+this.bonusDistanceCounter*this.pointsDistanceBonus+this.bonusTimeCounter*this.pointsTimeBonus-400*this.failedShotsCounter},showResults:function(){var tableResults=document.getElementById("tbl_results"),cellType="th";this.hitsArray.forEach(element=>{var i=0,row=document.createElement("tr");for(i=0;i<4;i++){var cell=document.createElement(cellType);cell.textContent=element[i],row.appendChild(cell)}cellType="td",tableResults.appendChild(row)});var statsArray=[];statsArray.push("BONUS"),statsArray.push([this.bonusDistanceCounter+" x Distance < 5px","+"+this.bonusDistanceCounter*this.pointsDistanceBonus+" pts"]),statsArray.push([this.bonusTimeCounter+" x Time < 400ms","+"+this.bonusTimeCounter*this.pointsTimeBonus+" pts"]),statsArray.push("PENALTIES"),statsArray.push([this.failedShotsCounter+" x Failed Shots",-400*this.failedShotsCounter+" pts"]),statsArray.forEach(element=>{var i=0,rowSize=0,row=document.createElement("tr");for(Array.isArray(element)?(cellType="td",rowSize=2):(cellType="th",rowSize=1),i=0;i<rowSize;i++){var cell=document.createElement(cellType);"th"==cellType?(cell.setAttribute("colspan",4),cell.textContent=element):(cell.setAttribute("colspan",2),cell.textContent=element[i]),row.appendChild(cell)}tableResults.appendChild(row)});var row=document.createElement("tr"),cell=document.createElement("th");cell.setAttribute("colspan",4),cell.textContent="TOTAL SCORE",row.appendChild(cell),tableResults.appendChild(row),row=document.createElement("tr"),(cell=document.createElement("td")).setAttribute("colspan",4),cell.style.backgroundColor="red",cell.style.color="white",cell.style.fontSize="1.5em",cell.textContent=this.totalScore.toString(),row.appendChild(cell),tableResults.appendChild(row),tableResults.style.opacity="1",document.getElementById("replay").innerHTML="Click to replay";var t=this;setTimeout(function(){t.input.onDown.add(t.replay,t)},1500)},replay:function(){var tableResults=document.getElementById("tbl_results");tableResults.style.opacity=0,tableResults.innerHTML="",document.getElementById("replay").innerHTML="",this.emitter.destroy(),this.state.start("menu")}};aimingtest.trackingMode=function(game){},aimingtest.trackingMode.prototype=function(game){},aimingtest.trackingMode.prototype={create:function(){this.timerHits={isOn:!1,start:function(){this.t0=performance.now()},getTime:function(){var elapsedTimeMs;return this.t1=performance.now(),Math.ceil(this.t1-this.t0)}},this.timerFails={isOn:!1,start:function(){this.t0=performance.now()},getTime:function(){var elapsedTimeMs;return this.t1=performance.now(),Math.ceil(this.t1-this.t0)}},this.distances=0,this.samples=0,this.evasionTweenx=null,this.evasionTweeny=null,this.penalties=0;var cookie=globals.getCookie("aimingTrackingBest1");this.bestScore=""!=cookie?parseInt(cookie):0,this.display=document.getElementById("display"),this.display.innerHTML="",this.target,this.score=0,this.totalScore=0;var t=this;this.emitter=globals.getEmitter(this.game),this.sndShot=this.add.audio("lgfailed",1,!1),this.sndHit=this.add.audio("lghit",1,!1),this.sndTarget=this.add.audio("spawn",1,!1),this.target=this.add.sprite(this.math.between(80,880),this.math.between(80,460),"atl_game","targetc"),this.target.anchor.setTo(.5,.5),this.target.radio=this.target.height/2,this.target.inputEnabled=!0,this.target.visible=!1,this.target.sp=400,this.target.spx=this.target.sp/2,this.target.spy=this.target.sp/3,this.tweenMargin=2*this.target.radio,this.sndTarget.play(),this.target.reset(this.math.between(80,600),this.math.between(80,350)),this.resetTargetx(),this.resetTargety(),this.input.onUp.add(function(){t.onUpblocked||(t.timerHits.isOn&&(this.score+=Math.ceil(this.timerHits.getTime()/100),this.timerHits.isOn=!1),this.timerFails.isOn&&(this.penalties+=this.timerFails.getTime()/100,this.timerFails.isOn=!1))},this),this.onUpblocked=!1,this.firstMouseOver=!1,this.input.mouse.mouseOutCallback=function(){t.onUpblocked=!0},this.input.mouse.mouseOverCallback=function(){t.firstMouseOver=!t.firstMouseOver,t.firstMouseOver||(t.onUpblocked=!1)},this.timerEvent=this.time.events.loop(100,function(){var distance=globals.getDistance(t.target.position,t.input.position);t.samples++,t.distances+=distance},this),this.gameOverTimer=setTimeout(function(){t.gameOver()},60*Phaser.Timer.SECOND)},update:function(){var t=this;this.input.activePointer.dirty=!0,this.input.activePointer.isDown&&(this.target.input.pointerOver()?(0==t.emitter.counts.emitted&&(t.emitter.emitX=Math.ceil(t.target.x),t.emitter.emitY=Math.ceil(t.target.y),t.emitter.explode(100,3)),this.timerHits.isOn||(this.timerHits.start(),this.timerHits.isOn=!0),this.timerFails.isOn&&(this.penalties+=this.timerFails.getTime()/100,this.timerFails.isOn=!1),this.sndHit.play()):(this.timerHits.isOn&&(this.score+=this.timerHits.getTime()/100,this.timerHits.isOn=!1),this.timerFails.isOn||(this.timerFails.start(),this.timerFails.isOn=!0)))},resetTargetx:function(){var tx,duration,t=this;null!=this.evasionTweenx&&this.evasionTweenx.stop(),tx=this.target.x>this.world.width/2?Phaser.Math.between(this.tweenMargin,this.world.width/2-this.target.radio):Phaser.Math.between(this.world.width/2+this.target.radio,this.world.width-this.tweenMargin),duration=Math.ceil(1e3*Math.abs(this.target.x-tx)/this.target.spx),this.evasionTweenx=this.add.tween(this.target).to({x:tx},duration,Phaser.Easing.Back.InOut).start(),this.evasionTweenx.onComplete.addOnce(t.resetTargetx,this)},resetTargety:function(){var ty,duration,t=this;null!=this.evasionTweeny&&this.evasionTweeny.stop(),ty=Phaser.Math.between(this.tweenMargin,this.world.height-this.tweenMargin),duration=Math.ceil(1e3*Math.abs(this.target.y-ty)/this.target.spy),this.evasionTweeny=this.add.tween(this.target).to({y:ty},duration,Phaser.Easing.Back.InOut).start(),this.evasionTweenx.onComplete.addOnce(t.resetTargety,this)},gameOver:function(){this.input.onDown.removeAll(),this.target.visible=!1,this.time.events.remove(this.timerEvent),clearTimeout(this.gameOverTimer),this.input.mouse.mouseOutCallback=null,this.input.mouse.mouseOverCallback=null,this.setTotalScore(),this.bestScore<this.totalScore?(this.display.innerHTML="You got a new record in Tracking mode!!!",globals.setCookie("aimingTrackingBest1",this.totalScore,180)):this.display.innerHTML="Your best score is "+this.bestScore.toString()+" (Tracking mode)",this.showResults()},setTotalScore:function(){this.totalScore=Math.ceil(this.score-this.penalties-.5*(60-(this.score+this.penalties)/10))},showResults:function(){var tableResults=document.getElementById("tbl_results"),cellType="th",row=document.createElement("tr"),cell,cell,cell;(cell=document.createElement("th")).textContent="",row.appendChild(cell),(cell=document.createElement("th")).textContent="TIME",row.appendChild(cell),(cell=document.createElement("th")).textContent="SCORE",row.appendChild(cell),tableResults.appendChild(row);var usefullTime=Math.ceil(this.score/10),wastedTime=Math.ceil(this.penalties/10),averageDistance=Math.ceil(this.distances/this.samples),idleTime=60-usefullTime-wastedTime,row=document.createElement("tr"),cell,cell,cell;(cell=document.createElement("th")).textContent="HIT",row.appendChild(cell),(cell=document.createElement("td")).textContent=usefullTime.toString()+" secs",row.appendChild(cell),(cell=document.createElement("td")).textContent="+"+Math.ceil(this.score).toString(),row.appendChild(cell),tableResults.appendChild(row);var row=document.createElement("tr"),cell,cell,cell;(cell=document.createElement("th")).textContent="FAULTS",row.appendChild(cell),(cell=document.createElement("td")).textContent=wastedTime.toString()+" secs",row.appendChild(cell),(cell=document.createElement("td")).textContent="-"+Math.ceil(this.penalties).toString(),row.appendChild(cell),tableResults.appendChild(row);var row=document.createElement("tr"),cell,cell,cell;(cell=document.createElement("th")).textContent="IDLE",row.appendChild(cell),(cell=document.createElement("td")).textContent=idleTime.toString()+" secs",row.appendChild(cell),(cell=document.createElement("td")).textContent="-"+Math.ceil(idleTime/2).toString(),row.appendChild(cell),tableResults.appendChild(row);var row=document.createElement("tr"),cell,cell;(cell=document.createElement("th")).setAttribute("colspan",2),cell.textContent="AVERAGE DISTANCE",row.appendChild(cell),(cell=document.createElement("td")).textContent=averageDistance+" px",row.appendChild(cell),tableResults.appendChild(row);var row=document.createElement("tr"),cell;(cell=document.createElement("th")).setAttribute("colspan",2),cell.textContent="TOTAL SCORE",row.appendChild(cell),(cell=document.createElement("td")).style.backgroundColor="red",cell.style.color="white",cell.style.fontSize="1.5em",cell.textContent=this.totalScore.toString(),row.appendChild(cell),tableResults.appendChild(row),tableResults.style.opacity="1",document.getElementById("replay").innerHTML="Click to replay";var t=this;setTimeout(function(){t.input.onDown.add(t.replay,t)},1500)},replay:function(){var tableResults=document.getElementById("tbl_results");tableResults.style.opacity=0,tableResults.innerHTML="",document.getElementById("replay").innerHTML="",this.emitter.destroy(),this.state.start("menu")}};window.onload=function(){var game=new Phaser.Game(960,540,Phaser.CANVAS,"div_game");game.state.add("boot",aimingtest.boot),game.state.add("menu",aimingtest.menu),game.state.add("basicMode",aimingtest.basicMode),game.state.add("evasionMode",aimingtest.evasionMode),game.state.add("trackingMode",aimingtest.trackingMode),game.state.start("boot")};